(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-077bb196"],{"498a":function(t,a,e){"use strict";var n=e("23e7"),r=e("58a8").trim,s=e("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return r(this)}})},58990:function(t,a){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,a,e){var n=e("1d80"),r=e("58990"),s="["+r+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(a){var e=String(n(a));return 1&t&&(e=e.replace(i,"")),2&t&&(e=e.replace(o,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},"87fc":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form-table")],1)},r=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("AppForm",{on:{"form-input":t.assignValues}}),e("AppImage",{on:{"file-selected":t.assignFile}}),e("button",{staticClass:"btn btn-primary btn-lg mt-5 col-6 offset-3",on:{click:t.submitForm}},[t._v("حفظ")]),e("div",{staticClass:"mt-5"}),t.isLoading?e("div",[e("h3",{staticClass:"text-center",class:{"text-success":"100 %"===t.uploadStatusText}},[t._v(t._s(t.uploadStatusText))])]):t._e(),t.errorCreating?e("div",[e("h3",{staticClass:"text-center sucesss"},[t._v(t._s(t.errorCreating))])]):t._e()],1)])},i=[],o=(e("2ca0"),e("498a"),e("96cf"),e("1da1")),c=e("2b0e"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"px-3"},[e("div",{staticClass:"col-12 mt-5 px-5"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header text-center"},[t._v("المرفقات")]),e("div",{staticClass:"card-body"},[e("iframe",{attrs:{src:t.fileContent,width:"100%",height:"250rem"}})])])]),e("div",{staticClass:"form-file mt-3"},[e("input",{staticClass:"form-file-input",attrs:{type:"file",name:"document",id:"file",accept:"application/pdf, image/png, image/jpg, image/jpeg"},on:{change:t.handleSelectFile}}),e("label",{staticClass:"form-file-label",attrs:{for:"file"}},[e("span",{staticClass:"form-file-text"},[t._v(t._s(t.displayFileName))]),e("span",{staticClass:"form-file-button"},[t._v("رفع ملف")])])])])},u=[],m=(e("b0c0"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("8bab")),p={data:function(){return{fileName:"",fileContent:""}},computed:{displayFileName:function(){return this.fileName?this.fileName:"Choose File"}},props:[],methods:{handleSelectFile:function(t){var a=t.target.files[0];this.fileName=a.name,this.fileContent=URL.createObjectURL(a),this.$emit("file-selected",a)},handleFileChange:function(t){var a=t.target.files[0];this.fileName=a.name;var e=new e;e.append("files",a),m["a"].post("/fileuploads",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){alert("success"),console.log(t)})).catch((function(t){console.log(t)}))}}},f=p,d=e("2877"),v=Object(d["a"])(f,l,u,!1,null,null,null),g=v.exports,C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12"},[e("form",{staticClass:"form-group",on:{input:t.emitFormInput}},[e("div",{staticClass:"input-group mt-3"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contractNumber,expression:"contractNumber"}],staticClass:"form-control rtl",attrs:{type:"text",name:"contractNumber",id:"contractNumber"},domProps:{value:t.contractNumber},on:{input:function(a){a.target.composing||(t.contractNumber=a.target.value)}}}),e("label",{staticClass:"input-group-text",attrs:{for:"contractNumber"}},[t._v("رقم العقد")])]),e("div",{staticClass:"input-group mt-3"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contractName,expression:"contractName"}],staticClass:"form-control rtl",attrs:{type:"text",name:"contractName",id:"contractName"},domProps:{value:t.contractName},on:{input:function(a){a.target.composing||(t.contractName=a.target.value)}}}),e("label",{staticClass:"input-group-text",attrs:{for:"contractName"}},[t._v("اسم العقد")])]),e("div",{staticClass:"input-group mt-3"},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],staticClass:"form-control rtl",attrs:{type:"text",name:"company",id:"company"},domProps:{value:t.company},on:{input:function(a){a.target.composing||(t.company=a.target.value)}}}),e("label",{staticClass:"input-group-text",attrs:{for:"company"}},[t._v("الشركة المنفذة")])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"input-group"},[t._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],staticClass:"form-control rtl",attrs:{type:"date",name:"endDate",id:"endDate"},domProps:{value:t.endDate},on:{input:function(a){a.target.composing||(t.endDate=a.target.value)}}}),e("label",{staticClass:"input-group-text",attrs:{for:"endDate"}},[t._v("تاريخ النهاية")])])]),e("div",{staticClass:"col-12 col-md-6 mt-3 mt-md-0"},[e("div",{staticClass:"input-group"},[t._m(4),e("input",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],staticClass:"form-control rtl",attrs:{type:"date",name:"startDate",id:"startDate"},domProps:{value:t.startDate},on:{input:function(a){a.target.composing||(t.startDate=a.target.value)}}}),e("label",{staticClass:"input-group-text",attrs:{for:"startDate"}},[t._v("تاريخ البداية")])])])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"input-group"},[t._m(5),e("input",{directives:[{name:"model",rawName:"v-model",value:t.payment,expression:"payment"}],staticClass:"form-control",attrs:{type:"number",name:"payment",id:"payment"},domProps:{value:t.payment},on:{input:function(a){a.target.composing||(t.payment=a.target.value)}}}),e("label",{staticClass:"input-group-text",attrs:{for:"payment"}},[t._v("القيمة المالية")])])])])])},h=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"input-group-text",attrs:{for:"contractNumber"}},[e("i",{staticClass:"fas fa-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"input-group-text",attrs:{for:"contractName"}},[e("i",{staticClass:"fas fa-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"input-group-text",attrs:{for:"company"}},[e("i",{staticClass:"fas fa-font"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"input-group-text",attrs:{for:"endDate"}},[e("i",{staticClass:"fas fa-calendar-week"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"input-group-text",attrs:{for:"startDate"}},[e("i",{staticClass:"fas fa-calendar-week"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"input-group-text",attrs:{for:"payment"}},[e("i",{staticClass:"fas fa-sort-numeric-up-alt"})])}],b={props:["contractNumberProp","contractNameProp","companyProp","startDateProp","endDateProp","paymentProp"],data:function(){return{contractNumber:this.contractNumberProp||null,contractName:this.contractNameProp||null,company:this.companyProp||null,startDate:this.startDateProp||null,endDate:this.endDateProp||null,payment:this.paymentProp||null}},methods:{emitFormInput:function(){var t={contractNumber:this.contractNumber,contractName:this.contractName,company:this.company,startDate:this.startDate,endDate:this.endDate,payment:this.payment};this.$emit("form-input",t)}}},_=b,x=Object(d["a"])(_,C,h,!1,null,null,null),N=x.exports,y=c["default"].extend({computed:{isOrder:function(){return this.$route.path.startsWith("/orders")},uploadStatusText:function(){return this.uploadStatus}},data:function(){return{formData:{},file:"",isLoading:!0,uploadStatus:null,errorCreating:!1}},methods:{assignFile:function(t){this.file=t},assignValues:function(t){this.formData=t},submitForm:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var e,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(n in t.isLoading=!0,t.errorCreating="",e=new FormData,t.formData)t.formData[n]&&(r=t.formData[n].trim(),r&&e.append(n,t.formData[n]));t.file&&e.append("documentFile",t.file),e.append("isOrder",t.isOrder),m["a"].post("contracts/add",e,{onUploadProgress:function(a){a.lengthComputable&&(t.uploadStatus="".concat(Math.floor(a.loaded/a.total*100)," %"))}}).catch((function(a){t.isLoading=!1,t.errorCreating=a.message,console.log(a.message)}));case 7:case"end":return a.stop()}}),a)})))()}},components:{AppImage:g,AppForm:N}}),D=y,w=Object(d["a"])(D,s,i,!1,null,null,null),P=w.exports,F={components:{formTable:P}},$=F,E=Object(d["a"])($,n,r,!1,null,null,null);a["default"]=E.exports},c8d2:function(t,a,e){var n=e("d039"),r=e("58990"),s="​᠎";t.exports=function(t){return n((function(){return!!r[t]()||s[t]()!=s||r[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-077bb196.cceab642.js.map